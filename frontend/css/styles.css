/* Custom styles for the donation website */

/* Emergency fallback styles for visibility */
* {
    box-sizing: border-box;
}

/* Ensure proper visibility and contrast */
body {
    min-height: 100vh;
    background-color: #f5f8f5 !important;
    color: #1f2937 !important;
    font-family: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
}

body.dark {
    background-color: #102210 !important;
    color: #f9fafb !important;
}

/* Ensure content is visible */
.layout-container {
    min-height: 100vh;
    background-color: transparent;
}

/* Emergency visibility for main content */
main {
    background-color: transparent !important;
    color: inherit !important;
}

/* Ensure headers are visible */
h1, h2, h3, h4, h5, h6 {
    color: inherit !important;
}

/* Ensure buttons are visible */
button {
    cursor: pointer !important;
}

/* Ensure the hero section background image loads */
.hero-section [style*="background-image"] {
    background-color: #1f2937 !important;
    color: white !important;
}

/* Tab Navigation Styles */
.tab-button {
    position: relative;
    transition: all 0.2s ease-in-out;
}

.tab-button:focus {
    outline: 2px solid #0df20d;
    outline-offset: 2px;
}

.tab-button[aria-selected="true"]::after {
    content: '';
    position: absolute;
    bottom: -8px;
    left: 0;
    right: 0;
    height: 2px;
    background-color: #0df20d;
    border-radius: 1px;
}

/* Tab Panel Transitions */
.tab-panel {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
}

.tab-panel.hidden {
    opacity: 0;
    transform: translateY(10px);
}

.tab-panel.active {
    opacity: 1;
    transform: translateY(0);
}

/* Loading Animation */
.tab-loading {
    opacity: 0.8;
}

/* Donation Amount Selection */
.donation-amount {
    transition: all 0.2s ease-in-out;
    cursor: pointer;
}

.donation-amount:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(13, 242, 13, 0.15);
}

.donation-amount:focus {
    outline: 2px solid #0df20d;
    outline-offset: 2px;
}

/* Custom Amount Input */
#custom-amount:focus {
    outline: none;
    border-color: #0df20d;
    box-shadow: 0 0 0 3px rgba(13, 242, 13, 0.1);
}

/* Mobile Navigation Styles */
.mobile-nav-item {
    min-height: 44px; /* Ensure minimum touch target size */
    touch-action: manipulation; /* Optimize for touch */
}

.mobile-nav-item:active {
    transform: scale(0.98);
    transition: transform 0.1s ease;
}

/* Mobile Menu Animation */
#mobile-menu-panel.open {
    transform: translateX(0);
}

#mobile-menu.open {
    display: block;
}

/* Responsive Tab Navigation */
@media (max-width: 640px) {
    .tab-button {
        font-size: 0.875rem;
        padding: 0.75rem 1rem; /* Increased padding for better touch targets */
        min-height: 44px; /* Ensure minimum touch target size */
        touch-action: manipulation;
    }
    
    .tab-button[aria-selected="true"]::after {
        bottom: -6px;
    }
    
    /* Mobile-specific button styles */
    .donation-amount {
        min-height: 44px;
        touch-action: manipulation;
        padding: 0.75rem;
    }
    
    /* Ensure all interactive elements meet touch target requirements */
    button, 
    a, 
    input[type="button"], 
    input[type="submit"], 
    .clickable {
        min-height: 44px;
        min-width: 44px;
        touch-action: manipulation;
    }
    
    /* Mobile hero section adjustments */
    .hero-section {
        min-height: 400px;
        padding: 2rem 1rem;
    }
    
    /* Mobile statistics grid */
    .stats-grid {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    /* Mobile donation form */
    .donation-grid {
        grid-template-columns: 1fr 1fr;
        gap: 0.75rem;
    }
    
    /* Mobile footer adjustments */
    footer {
        padding: 2rem 1rem;
    }
    
    footer .flex {
        flex-direction: column;
        gap: 1.5rem;
        text-align: center;
    }
}

/* Accessibility Improvements */
@media (prefers-reduced-motion: reduce) {
    .tab-panel,
    .tab-button,
    .donation-amount {
        transition: none;
    }
}

/* Statistics Animation Styles */
.stat-value {
    transition: all 0.3s ease-in-out;
}

.stat-updating {
    transform: scale(0.98);
    opacity: 0.7;
}

.stat-value:not(.stat-updating) {
    transform: scale(1);
    opacity: 1;
}

/* Statistics Container Hover Effects */
[data-stat] {
    transition: all 0.2s ease-in-out;
}

[data-stat]:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(13, 242, 13, 0.1);
}

/* Connection Status Indicators */
[data-connection-status] {
    transition: color 0.2s ease-in-out;
}

[data-last-updated] {
    transition: opacity 0.2s ease-in-out;
}

/* Mobile Layout Optimizations */
@media (max-width: 768px) {
    /* Container adjustments */
    .layout-content-container {
        padding-left: 1rem;
        padding-right: 1rem;
    }
    
    /* Hero section mobile optimization */
    .hero-section {
        background-color: #f0f9ff !important;
        min-height: 400px !important;
    }
    
    .hero-section h1 {
        font-size: 2rem;
        line-height: 1.2;
        color: #1f2937 !important;
    }
    
    .hero-section h2 {
        font-size: 1rem;
        line-height: 1.4;
        color: #374151 !important;
    }
    
    /* Statistics cards mobile layout */
    .stats-container {
        padding: 1rem;
    }
    
    .stats-container .flex {
        flex-direction: column;
        gap: 1rem;
    }
    
    /* Mobile text sizing */
    .mobile-text-adjust h1 {
        font-size: 2rem;
    }
    
    .mobile-text-adjust h2 {
        font-size: 1.5rem;
    }
    
    .mobile-text-adjust p {
        font-size: 0.875rem;
        line-height: 1.5;
    }
    
    /* Mobile form elements */
    input[type="number"], 
    input[type="text"], 
    input[type="email"] {
        min-height: 44px;
        font-size: 16px; /* Prevent zoom on iOS */
        padding: 0.75rem;
    }
    
    /* Mobile PayPal form */
    #paypal-donation-form button {
        min-height: 48px;
        font-size: 1rem;
        padding: 0.75rem 1.5rem;
    }
}

/* Tablet-specific adjustments */
@media (min-width: 768px) and (max-width: 1024px) {
    .donation-grid {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .stats-container .flex {
        flex-wrap: wrap;
        justify-content: center;
    }
    
    .stats-container .flex > div {
        min-width: 200px;
        flex: 1;
    }
}

/* Large mobile devices */
@media (max-width: 480px) {
    /* Extra small screens */
    .hero-section {
        padding: 1.5rem 1rem;
        min-height: 350px;
    }
    
    .hero-section h1 {
        font-size: 1.75rem;
    }
    
    .donation-grid {
        grid-template-columns: 1fr;
        max-width: 280px;
        margin: 0 auto;
    }
    
    .donation-amount {
        padding: 1rem;
        text-align: center;
    }
    
    /* Mobile navigation adjustments */
    #mobile-menu-panel {
        width: 100%;
        max-width: 320px;
    }
    
    /* Compact statistics display */
    .stat-value {
        font-size: 2rem;
    }
    
    .stat-label {
        font-size: 0.875rem;
    }
}

/* Image Optimization Styles */
.lazy-loading {
    opacity: 0.7;
    transition: opacity 0.3s ease-in-out;
    background-color: #f3f4f6;
    background-image: linear-gradient(45deg, #f3f4f6 25%, transparent 25%), 
                      linear-gradient(-45deg, #f3f4f6 25%, transparent 25%), 
                      linear-gradient(45deg, transparent 75%, #f3f4f6 75%), 
                      linear-gradient(-45deg, transparent 75%, #f3f4f6 75%);
    background-size: 20px 20px;
    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
    animation: loading-shimmer 1.5s infinite linear;
}

.lazy-loaded {
    opacity: 1;
    transition: opacity 0.3s ease-in-out;
}

.image-error {
    opacity: 0.6;
    filter: grayscale(100%);
    border: 1px dashed #d1d5db;
}

.image-loaded {
    opacity: 1;
}

/* Loading animation for images */
@keyframes loading-shimmer {
    0% {
        background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
    }
    100% {
        background-position: 20px 20px, 20px 30px, 30px 10px, 10px 20px;
    }
}

/* Responsive image containers */
.responsive-image-container {
    position: relative;
    overflow: hidden;
}

.responsive-image-container img {
    width: 100%;
    height: auto;
    display: block;
}

/* Image aspect ratio preservation */
.aspect-ratio-16-9 {
    aspect-ratio: 16 / 9;
}

.aspect-ratio-4-3 {
    aspect-ratio: 4 / 3;
}

.aspect-ratio-1-1 {
    aspect-ratio: 1 / 1;
}

/* Fallback for browsers without aspect-ratio support */
@supports not (aspect-ratio: 1) {
    .aspect-ratio-16-9::before {
        content: '';
        display: block;
        padding-top: 56.25%; /* 9/16 * 100% */
    }
    
    .aspect-ratio-4-3::before {
        content: '';
        display: block;
        padding-top: 75%; /* 3/4 * 100% */
    }
    
    .aspect-ratio-1-1::before {
        content: '';
        display: block;
        padding-top: 100%;
    }
    
    .aspect-ratio-16-9 img,
    .aspect-ratio-4-3 img,
    .aspect-ratio-1-1 img {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
    }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    .lazy-loading,
    .lazy-loaded,
    .image-loaded {
        transition: none;
    }
    
    .loading-shimmer {
        animation: none;
    }
}

/* High contrast mode image adjustments */
@media (prefers-contrast: high) {
    .image-error {
        border-color: #000;
        filter: contrast(150%);
    }
    
    .lazy-loading {
        background-color: #000;
        color: #fff;
    }
}

/* Dark mode image adjustments */
@media (prefers-color-scheme: dark) {
    .lazy-loading {
        background-color: #374151;
        background-image: linear-gradient(45deg, #374151 25%, transparent 25%), 
                          linear-gradient(-45deg, #374151 25%, transparent 25%), 
                          linear-gradient(45deg, transparent 75%, #374151 75%), 
                          linear-gradient(-45deg, transparent 75%, #374151 75%);
    }
    
    .image-error {
        border-color: #6b7280;
        opacity: 0.8;
    }
}

/* High Contrast Mode Support */
@media (prefers-contrast: high) {
    .tab-button[aria-selected="true"] {
        background-color: #0df20d;
        color: #000;
    }
    
    .donation-amount:hover {
        background-color: #0df20d;
        color: #000;
    }
    
    [data-stat]:hover {
        border-color: #0df20d;
    }
    
    .mobile-nav-item:hover {
        background-color: #0df20d;
        color: #000;
    }
}

/* Landscape orientation adjustments */
@media (max-width: 768px) and (orientation: landscape) {
    .hero-section {
        min-height: 300px;
        padding: 1rem;
    }
    
    .hero-section h1 {
        font-size: 1.5rem;
    }
    
    .hero-section h2 {
        font-size: 0.875rem;
    }
}